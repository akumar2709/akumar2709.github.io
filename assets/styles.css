/* --- Base -------------------------------------------------------------- */
:root {
  --bg: #ffffff;
  --fg: #0b0b0c;
  --muted: #63666a;
  --link: #2b6cb0;          /* visited links will use this too */
  --card: #f6f7f9;
  --line: #e8eaef;
  --radius: 16px;
  --shadow: 0 1px 2px rgba(0,0,0,.04), 0 8px 24px rgba(0,0,0,.06);
  color-scheme: light dark;
}

html[data-theme="dark"],
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0b0c;
    --fg: #eceff4;
    --muted: #a2a6ad;
    --link: #89b4ff;        /* visited matches this in dark too */
    --card: #131316;
    --line: #22232a;
    --shadow: none;
  }
}

* { box-sizing: border-box; }
html, body { height: 100%; }
html { scroll-behavior: smooth; }           /* smooth scroll */
body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font: 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

.wrap { max-width: 880px; margin: 0 auto; padding: 0 20px; }
a:link, a:visited { color: var(--link); text-decoration-thickness: 1px; text-underline-offset: 3px; } /* no purple */
h1, h2, h3 { line-height: 1.2; margin: 0 0 .5rem; }
h1 { font-size: clamp(2rem, 3vw, 2.8rem); letter-spacing: .2px; }
h2 { font-size: clamp(1.3rem, 2.2vw, 1.6rem); margin-top: 2.2rem; }
h3 { font-size: 1.05rem; }
p { margin: .6rem 0; }
ul, ol { padding-left: 1.2rem; }
img { max-width: 100%; height: auto; border-radius: 12px; }

/* Prevent sticky header from covering section titles on scroll */
section { scroll-margin-top: 72px; }

.skip { position: absolute; left: -10000px; top: auto; }
.skip:focus { left: 12px; top: 12px; background: var(--bg); padding: .5rem .75rem; border: 1px solid var(--line); border-radius: 8px; }

/* --- Header ------------------------------------------------------------ */
.site-header {
  position: sticky; top: 0; z-index: 10;
  border-bottom: 1px solid var(--line);
  background: color-mix(in oklab, var(--bg), transparent 10%);
  backdrop-filter: saturate(140%) blur(6px);
}
.site-header .wrap { display: flex; align-items: center; gap: 16px; padding: 10px 20px; }
.brand { font-weight: 700; color: var(--fg); text-decoration: none; }
.nav { display: flex; align-items: center; gap: 14px; margin-left: auto; }
.nav a { color: var(--fg); opacity: .85; text-decoration: none; padding: 6px 2px; border-radius: 8px; }
.nav a:hover, .nav a:focus { opacity: 1; background: var(--card); }
.nav a:visited { color: var(--fg); }  /* keep nav consistent */

/* Hide any old theme toggle that might still be present */
.theme-btn { display: none !important; }

/* --- Hero -------------------------------------------------------------- */
.hero { display: grid; grid-template-columns: 120px 1fr; gap: 20px; align-items: center; margin: 28px 0 10px; }
.avatar { width: 120px; height: 120px; object-fit: cover; border-radius: 50%; box-shadow: var(--shadow); }
.tagline { margin-top: .2rem; color: var(--muted); }
.meta { margin-top: .5rem; display: flex; gap: 8px; flex-wrap: wrap; }
.chip {
  display: inline-flex; align-items: center; gap: 8px;
  font-size: .92rem; padding: 6px 12px; border: 1px solid var(--line);
  border-radius: 999px; text-decoration: none; color: var(--fg);
  background: var(--card);
}
.icon { width: 14px; height: 14px; display: inline-block; vertical-align: -2px; fill: currentColor; } /* icons visible in light/dark */

/* --- Sections ---------------------------------------------------------- */
.section-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; }
.input { border: 1px solid var(--line); background: var(--bg); color: var(--fg); border-radius: 10px; padding: 6px 10px; }
.timeline { list-style: none; padding: 0; margin: 0; }
.timeline li { border-left: 2px solid var(--line); padding-left: 12px; margin: 10px 0; }
.timeline time { font-variant-numeric: tabular-nums; color: var(--muted); margin-right: .5rem; }

.pubs { counter-reset: ref; list-style: none; padding: 0; }
.pubs li { counter-increment: ref; margin: 14px 0; padding-left: 1.2rem; text-indent: -1.2rem; }
.pubs li::marker { content: none; }
.pubs li::before { content: "[" counter(ref) "] "; color: var(--muted); }
.pubs .title { font-weight: 600; }
.pubs .venue { font-style: italic; color: var(--muted); }
.pubs .links a { margin-right: .6rem; }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 14px; }
.card { background: var(--card); border: 1px solid var(--line); border-radius: var(--radius); padding: 14px; box-shadow: var(--shadow); }
.card h3 { margin-bottom: .2rem; }
.compact { margin: 0; padding-left: 1rem; }
.compact li { margin: .25rem 0; }
.muted { color: var(--muted); }

/* --- Footer ------------------------------------------------------------ */
.site-footer { border-top: 1px solid var(--line); margin-top: 40px; }
.site-footer .wrap { padding: 24px 20px; font-size: .92rem; color: var(--muted); }

/* --- Responsiveness ---------------------------------------------------- */
@media (max-width: 560px) {
  .hero { grid-template-columns: 80px 1fr; }
  .avatar { width: 80px; height: 80px; }
}

/* --- Print ------------------------------------------------------------- */
@media print {
  .site-header, .nav, #projects, #news { display: none !important; }
  body { background: #fff; color: #000; }
}
